const openAlert=document.querySelector("#openAlertBtn"),alertWindow=document.querySelector("#alertWindow"),clickCountDisplay=document.querySelector("#clickCount"),resetBtn=document.querySelector("#resetCountBtn"),closeBtn=document.querySelector("#closeButton"),table=document.querySelector("#table"),tableData=document.querySelector("#tableData"),loadBar=document.querySelector("#loadBar"),alertContent=document.querySelector("#alertContent"),importDataURL="https://jsonplaceholder.typicode.com/users",closeAlert=()=>{alertWindow.style.display="none"},refreshDisplay=()=>{localStorage.hasOwnProperty("clickCount")?clickCountDisplay.innerHTML=localStorage.clickCount:clickCountDisplay.innerHTML=0},fetchData=(openAlert.onclick=()=>{alertWindow.style.display="block",localStorage.hasOwnProperty("clickCount")?(localStorage.clickCount=Number(localStorage.clickCount)+1,5<=localStorage.clickCount&&(resetBtn.style.display="block")):localStorage.clickCount=1,refreshDisplay()},closeBtn.onclick=()=>{closeAlert()},window.onclick=e=>{e.target==alertWindow&&closeAlert()},resetBtn.onclick=()=>{localStorage.removeItem("clickCount"),resetBtn.style.display="none",refreshDisplay()},async()=>{try{const e=await fetch(importDataURL);if(e.ok)return await e.json();throw new Error("HTTP error: "+e.status)}catch(e){console.error("Could not get data: "+e)}}),fillTableWithContent=async()=>{let l=!1;try{loadBar.style.display="block";const e=await fetchData();e.forEach(e=>{let t=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td"),n=document.createElement("td"),r=document.createElement("td"),a=document.createElement("td");l.innerHTML=e.name,o.innerHTML=e.email,n.innerHTML=e.address.city+" "+e.address.street+" "+e.address.suite,r.innerHTML=e.phone,a.innerHTML=e.company.name,t.appendChild(l),t.appendChild(o),t.appendChild(n),t.appendChild(r),t.appendChild(a),tableData.appendChild(t)})}catch(e){console.error("An error occured: "+e.message),l=!0;let t=document.createElement("p");t.style.color="#F00",t.style.fontWeight="700",t.innerHTML="Something went wrong. Check console for errors.",alertContent.appendChild(t)}finally{loadBar.style.display="none",l||(table.style.display="block")}};fillTableWithContent();